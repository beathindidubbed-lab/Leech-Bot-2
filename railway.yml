version: 2

# Railway deployment configuration
build:
  builder: DOCKERFILE
  dockerfilePath: Dockerfile

deploy:
  startCommand: bash start.sh
  restartPolicyType: ON_FAILURE
  restartPolicyMaxRetries: 3

# Health check configuration
healthcheck:
  path: /
  port: $PORT
  interval: 30s
  timeout: 10s
  retries: 3

# Environment variables template
env:
  # Required
  BOT_TOKEN: $BOT_TOKEN
  OWNER_ID: $OWNER_ID
  TELEGRAM_API: $TELEGRAM_API
  TELEGRAM_HASH: $TELEGRAM_HASH
  DATABASE_URL: $DATABASE_URL
  
  # Optional
  BASE_URL: $BASE_URL
  PORT: $PORT
  UPSTREAM_REPO: $UPSTREAM_REPO
  UPSTREAM_BRANCH: $UPSTREAM_BRANCH
  UPDATE_PKGS: $UPDATE_PKGS
